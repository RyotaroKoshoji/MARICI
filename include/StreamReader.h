#ifndef SYSTEM_IO_STREAMREADER_H
#define SYSTEM_IO_STREAMREADER_H

#include <vector>
#include <string>
#include <utility>


namespace System
{
	namespace IO
	{
		class StreamReader
		{
// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Constructors, destructor, and operators

		public:
			StreamReader() noexcept = default;
			explicit StreamReader(std::vector<std::string>&&) noexcept;
			explicit StreamReader(const std::string&);
			StreamReader(const StreamReader&, const std::string& startLine, const std::string& finalLine);

			virtual ~StreamReader() = default;

			StreamReader(const StreamReader&) = default;
			StreamReader(StreamReader&&) noexcept = default;
			StreamReader& operator=(const StreamReader&) = default;
			StreamReader& operator=(StreamReader&&) noexcept = default;

		// Constructors, destructor, and operators
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Property

			const std::vector<std::string>& allLines() const noexcept;

			void setAllLines(const std::vector<std::string>&);
			void setAllLines(std::vector<std::string>&&);
			void setAllTexts(const std::string&);

			void pushBackAllLines(const std::vector<std::string>&);
			void pushBackAllLines(std::vector<std::string>&&);
			void pushBackAllTexts(const std::string&);

			bool isEmpty() const noexcept;

		// Property
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Methods

			StreamReader getListBlock(const std::string& prefixSymbol, const std::string& listName) const;
			std::vector<std::pair<std::string, StreamReader>> enumerateListBlocks(const std::string& prefixSymbol) const;

			void clear() noexcept;

			template <typename T>
			bool readParameter(const std::string& flagName, T& parameter) const;

		// Methods
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Static methods

			static int toIntegerValue(const std::string& valueText);
			static double toFractionalValue(const std::string& valueText);

			static std::vector<std::string> toParameterTuple(const std::string& stringLine);

		// Static methods
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Private methods

		private:
			void pushBackStringLine(const std::string&);
			void pushBackStringLine(std::string&&);

			std::string findParameterLine(const std::string& dataFlag) const;

			template <typename T>
			static bool readValue(const std::string& parameterLine, const std::string& flagName, T& parameter);

		// Private methods
// **********************************************************************************************************************************************************************************************************************************************************************************************

		private:
			std::vector<std::string> _allLines;
		};
	}
}

// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// Methods

inline const std::vector<std::string>& System::IO::StreamReader::allLines() const noexcept
{
	return _allLines;
}

inline void System::IO::StreamReader::setAllLines(const std::vector<std::string>& inputLines)
{
	_allLines.clear();

	for (const auto& stringLine : inputLines)
		pushBackStringLine(stringLine);
}

inline void System::IO::StreamReader::setAllLines(std::vector<std::string>&& inputLines)
{
	_allLines.clear();

	for (auto&& stringLine : inputLines)
		pushBackStringLine(std::move(stringLine));
}

inline void System::IO::StreamReader::pushBackAllLines(const std::vector<std::string>& inputLines)
{
	for (const auto& stringLine : inputLines)
		pushBackStringLine(stringLine);
}

inline void System::IO::StreamReader::pushBackAllLines(std::vector<std::string>&& inputLines)
{
	for (auto&& stringLine : inputLines)
		pushBackStringLine(std::move(stringLine));
}

inline bool System::IO::StreamReader::isEmpty() const noexcept
{
	return _allLines.empty();
}

// Methods
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// Methods

inline void System::IO::StreamReader::clear() noexcept
{
	_allLines.clear();
}

template <typename T>
inline bool System::IO::StreamReader::readParameter(const std::string& flagName, T& parameter) const
{
	return readValue(findParameterLine(flagName), flagName, parameter);
}

// Methods
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// Private methods

inline std::string System::IO::StreamReader::findParameterLine(const std::string& dataFlag) const
{
	if (!(_allLines.empty()))
	{
		for (const auto& stringLine : _allLines)
		{
			if (stringLine.find(dataFlag) != std::string::npos)
				return stringLine;
		}
	}

	return std::string{};
}

// Private methods
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************


#endif // !SYSTEM_IO_STREAMREADER_H
