#ifndef SYSTEM_MARICI_PROGRAM_H
#define SYSTEM_MARICI_PROGRAM_H

#include <stdexcept>
#include <string>

#include <filesystem>
#include <iostream>

#include <vector>


namespace System
{
	namespace Marici
	{
		class Program final
		{
			using size_type = std::size_t;

			enum class ExecutionMode
			{
				crystal_extraction,
				crystal_prediction,
			};

// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Constructor and destructor

		public:
			Program(int argc, char* argv[]);
			~Program() = default;

		// Constructor and destructor
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Methods

			int execute();

		// Methods
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Private methods

		private:
			void outputInitialConsoleMessage() const;
			void initializeThreadingPolicy() const;

			void setExecutionMode();
			void readInputFilePath();

		// Private methods
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Private utility

			bool hasCommandLineFlag(const std::string& flag) const;
			std::string readCommandLineArgument(const std::string& flag) const;
			
		// Private utility
// **********************************************************************************************************************************************************************************************************************************************************************************************

		private:
			std::vector<std::string> _commandLineArgument;

			ExecutionMode _executionMode;
			std::filesystem::path _inputFilePath;


		private:
			Program() noexcept = delete;
			Program(const Program&) = delete;
			Program(Program&&) noexcept = delete;
			Program& operator=(const Program&) = delete;
			Program& operator=(Program&&) noexcept = delete;
		};
	}
}

// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// Private methods

inline void System::Marici::Program::outputInitialConsoleMessage() const
{
	std::string message;
	{
		message += "================================================================================================================\n\n";
		message += "\tWelcome to Marici 2025 (MAthematical Revolutionary Inventor of Crystalline Inorganic solids).\n";
		message += "\tFunctional materials discovery based on mixed-integer nonlinear programming.\n\n";
		message += "================================================================================================================\n";
	}

	std::cout << message << std::endl;
}

// Private methods
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// Private utility

inline bool System::Marici::Program::hasCommandLineFlag(const std::string& flag) const
{
	bool hasFlag = false;
	{
		for (const auto& commandLineText : _commandLineArgument)
		{
			if (commandLineText == flag)
			{
				hasFlag = true;
				break;
			}
		}
	}

	return hasFlag;
}

// Private utility
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************


#endif // !SYSTEM_MARICI_PROGRAM_H
