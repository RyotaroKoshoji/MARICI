#ifndef SYSTEM_PARALLEL_THREADINGPOLICY_H
#define SYSTEM_PARALLEL_THREADINGPOLICY_H

#include <string>


namespace System
{
	namespace Parallel
	{
		class ThreadingPolicy final
		{
			using size_type = std::size_t;

// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Constructor and destructor

		private:
			ThreadingPolicy() noexcept = default;

		public:
			~ThreadingPolicy() = default;

		// Constructor and destructor
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Public methods

			static size_type maxThreading() noexcept;
			static size_type mklThreading();
			static size_type mklDomainThreading(const std::string& domainName);
			static size_type mklStriping();
			static bool isMklDynamic();

			static size_type defaultMaxThreading() noexcept;
			static size_type defaultMaxMklThreading() noexcept;

			static void setMaxThreading(const size_type maxThreading = 0) noexcept;
			static void setMklThreading(const size_type mklThreading = 0);
			static void setLocalMklThreading(const size_type localMklThreading = 0);
			static void setMklDomainThreading(const std::string& domainName, const size_type mklDomainThreading = 0);
			static void setMklStriping(const size_type mklStriping = 0);
			static void setMklDynamic(const bool);

		// Public methods
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Private methods

		private:
			static int translateMklDomainName(const std::string& domainName);

		// Private methods
// **********************************************************************************************************************************************************************************************************************************************************************************************

		private:
			static size_type s_maxThreading;

			static size_type s_defaultMaxThreading;
			static size_type s_defaultMaxMklThreading;


		private:
			ThreadingPolicy(const ThreadingPolicy&) = delete;
			ThreadingPolicy(ThreadingPolicy&&) noexcept = delete;
			ThreadingPolicy& operator=(const ThreadingPolicy&) = delete;
			ThreadingPolicy& operator=(ThreadingPolicy&&) noexcept = delete;
		};
	}
}

// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// Public methods

inline System::Parallel::ThreadingPolicy::size_type System::Parallel::ThreadingPolicy::maxThreading() noexcept
{
	return s_maxThreading;
}

inline System::Parallel::ThreadingPolicy::size_type System::Parallel::ThreadingPolicy::defaultMaxThreading() noexcept
{
	return s_defaultMaxThreading;
}

inline System::Parallel::ThreadingPolicy::size_type System::Parallel::ThreadingPolicy::defaultMaxMklThreading() noexcept
{
	return s_defaultMaxMklThreading;
}

inline void System::Parallel::ThreadingPolicy::setMaxThreading(const size_type maxThreading) noexcept
{
	if (maxThreading == 0)
		s_maxThreading = s_defaultMaxThreading;
	else
		s_maxThreading = maxThreading;
}

// Public methods
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************


#endif // !SYSTEM_PARALLEL_THREADINGPOLICY_H
