#ifndef SYSTEM_IO_STREAMWRITER_H
#define SYSTEM_IO_STREAMWRITER_H

#include <string>
#include <filesystem>
#include <vector>


namespace System
{
	namespace IO
	{
		class StreamWriter
		{
			using size_type = std::size_t;

// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Constructors, destructor, and operators

		public:
			StreamWriter() noexcept;
			virtual ~StreamWriter() = default;

			StreamWriter(const StreamWriter&) = default;
			StreamWriter(StreamWriter&&) noexcept = default;
			StreamWriter& operator=(const StreamWriter&) = default;
			StreamWriter& operator=(StreamWriter&&) noexcept = default;

		// Constructors, destructor, and operators
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Property

			const std::vector<std::string>& allLines() const noexcept;
			std::string allTexts() const;

			static size_type defaultFloatingPointPrecision() noexcept;
			static size_type upperFloatingPointPrecision() noexcept;

		// Property
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Methods

			void write(const StreamWriter&);
			void write(const std::string&);
			void write(const std::vector<std::string>&);
			void write(const size_type);
			void write(const int);
			void write(const double, const size_type precision = 0);

			void writeLine(const StreamWriter&);
			void writeLine(const std::string&);
			void writeLine(const std::vector<std::string>&);
			void writeLine(const size_type);
			void writeLine(const int);
			void writeLine(const double, const size_type precision = 0);

			void breakLine();
			void popBack();

			bool contains() const;
			void clear() noexcept;

		// Methods
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Private methods

		private:
			void writeTexts(const std::string&);
			void writeStream(const std::string&);

		// Private methods
// **********************************************************************************************************************************************************************************************************************************************************************************************

		private:
			std::vector<std::string> _allLines;

			static size_type s_defaultFloatingPointPrecision;
		};
	}
}

// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// Property

inline const std::vector<std::string>& System::IO::StreamWriter::allLines() const noexcept
{
	return _allLines;
}

inline std::string System::IO::StreamWriter::allTexts() const
{
	std::string allTexts;
	{
		for (const auto& stringLine : _allLines)
		{
			allTexts += stringLine;
			allTexts += "\n";
		}

		allTexts.pop_back();
	}

	return allTexts;
}

inline System::IO::StreamWriter::size_type System::IO::StreamWriter::upperFloatingPointPrecision() noexcept
{
	return (1 + s_defaultFloatingPointPrecision);
}

inline System::IO::StreamWriter::size_type System::IO::StreamWriter::defaultFloatingPointPrecision() noexcept
{
	return s_defaultFloatingPointPrecision;
}

// Property
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// Methods

inline void System::IO::StreamWriter::write(const StreamWriter& streamWriter)
{
	if (streamWriter.contains())
	{
		{
			if (_allLines.empty())
				_allLines.push_back(streamWriter.allLines()[0]);
			else
				_allLines.back() += streamWriter.allLines()[0];
		}

		for (size_type index = 1; index < streamWriter.allLines().size(); ++index)
			_allLines.push_back(streamWriter.allLines()[index]);
	}
}

inline void System::IO::StreamWriter::write(const std::string& inputTexts)
{
	if (inputTexts.find_first_of("\n") == std::string::npos)
		writeTexts(inputTexts);
	else
		writeStream(inputTexts);
}

inline void System::IO::StreamWriter::write(const std::vector<std::string>& inputTexts)
{
	for (const auto& stringLine : inputTexts)
	{
		if (stringLine.find_first_of("\n") == std::string::npos)
		{
			writeTexts(stringLine);
			_allLines.push_back(std::string{});
		}

		else
			writeStream(stringLine);
	}
}

inline void System::IO::StreamWriter::write(const size_type value)
{
	if (_allLines.empty())
		_allLines.push_back(std::to_string(value));
	else
		_allLines.back() += std::to_string(value);
}

inline void System::IO::StreamWriter::write(const int value)
{
	if (_allLines.empty())
		_allLines.push_back(std::to_string(value));
	else
		_allLines.back() += std::to_string(value);
}

inline void System::IO::StreamWriter::writeLine(const StreamWriter& streamWriter)
{
	write(streamWriter);
	_allLines.push_back(std::string{});
}

inline void System::IO::StreamWriter::writeLine(const std::string& inputTexts)
{
	write(inputTexts);
	_allLines.push_back(std::string{});
}

inline void System::IO::StreamWriter::writeLine(const std::vector<std::string>& inputTexts)
{
	write(inputTexts);
	_allLines.push_back(std::string{});
}

inline void System::IO::StreamWriter::writeLine(const size_type value)
{
	write(value);
	_allLines.push_back(std::string{});
}

inline void System::IO::StreamWriter::writeLine(const int value)
{
	write(value);
	_allLines.push_back(std::string{});
}

inline void System::IO::StreamWriter::writeLine(const double value, std::size_t precision)
{
	write(value, precision);
	_allLines.push_back(std::string{});
}

inline void System::IO::StreamWriter::breakLine()
{
	_allLines.push_back(std::string{});
}

inline void System::IO::StreamWriter::popBack()
{
	if (!(_allLines.empty()))
		_allLines.back().pop_back();
}

inline bool System::IO::StreamWriter::contains() const
{
	return !(_allLines.empty());
}

inline void System::IO::StreamWriter::clear() noexcept
{
	_allLines.clear();
}

// Methods
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// Private methods

inline void System::IO::StreamWriter::writeTexts(const std::string& inputTexts)
{
	if (_allLines.empty())
		_allLines.push_back(inputTexts);
	else
		_allLines.back() += inputTexts;
}

// Private methods
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************


#endif // !SYSTEM_IO_STREAMWRITER_H
