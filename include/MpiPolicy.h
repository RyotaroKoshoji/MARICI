#ifndef SYSTEM_PARALLEL_MPIPOLICY_H
#define SYSTEM_PARALLEL_MPIPOLICY_H

#include <string>

#include "ArgumentOutOfRangeException.h"


namespace System
{
	namespace Parallel
	{
		class MpiPolicy final
		{
			using size_type = std::size_t;

// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Constructor and destructor

		private:
			MpiPolicy() noexcept = default;

		public:
			~MpiPolicy() = default;

		// Constructor and destructor
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
		// Public methods

		public:
			static size_type mpiRank() noexcept;
			static size_type mpiProcessing() noexcept;

			static bool isMpiDirectoryName(const std::string& directoryName);
			static std::string getMpiDirectoryName() noexcept;

			static void setMpiRank(const size_type mpiRank) noexcept;
			static void setMpiProcessing(const size_type mpiProcessing);

		// Public methods
// **********************************************************************************************************************************************************************************************************************************************************************************************

		private:
			static size_type s_mpiRank;
			static size_type s_mpiProcessing;


		private:
			MpiPolicy(const MpiPolicy&) = delete;
			MpiPolicy(MpiPolicy&&) noexcept = delete;
			MpiPolicy& operator=(const MpiPolicy&) = delete;
			MpiPolicy& operator=(MpiPolicy&&) noexcept = delete;
		};
	}
}

// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// Public methods

inline System::Parallel::MpiPolicy::size_type System::Parallel::MpiPolicy::mpiRank() noexcept
{
	return s_mpiRank;
}

inline System::Parallel::MpiPolicy::size_type System::Parallel::MpiPolicy::mpiProcessing() noexcept
{
	return s_mpiProcessing;
}

inline std::string System::Parallel::MpiPolicy::getMpiDirectoryName() noexcept
{
	std::string directoryName;
	{
		directoryName += "Mpi_";
		directoryName += std::to_string(s_mpiRank);
	}

	return directoryName;
}

inline void System::Parallel::MpiPolicy::setMpiRank(const size_type value) noexcept
{
	s_mpiRank = value;
}

inline void System::Parallel::MpiPolicy::setMpiProcessing(const size_type value)
{
	if (0 < value)
		s_mpiProcessing = value;
	else
		throw System::ExceptionServices::ArgumentOutOfRangeException{ "System::Parallel::MpiPolicy::setMpiProcessing", "The number of mpi processing is not more than zero." };
}

// Public methods
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************


#endif // !SYSTEM_PARALLEL_MPIPOLICY_H
