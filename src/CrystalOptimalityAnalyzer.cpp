#include "CrystalOptimalityAnalyzer.h"

using namespace MathematicalCrystalChemistry::Analysis;


// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// Constructors

CrystalOptimalityAnalyzer::CrystalOptimalityAnalyzer() noexcept
	: _isActive{ false }
	, _crystalDesigner{}
{
}

CrystalOptimalityAnalyzer::CrystalOptimalityAnalyzer(const CrystalOptimalityAnalysisParameters& parameters)
	: _isActive{ parameters.needAnalysis() }
	, _crystalDesigner{}
{
	MathematicalCrystalChemistry::Design::CrystalDesignParameters crystalDesignParameters;
	{
		crystalDesignParameters.setGeometricalConstraintParameters(parameters.geometricalConstraintParameters());
		crystalDesignParameters.setGlobalStructuralOptimizationParameters(parameters.globalStructuralOptimizationParameters());
		crystalDesignParameters.setLocalStructuralOptimizationParameters(parameters.localStructuralOptimizationParameters());
		crystalDesignParameters.setPreciseStructuralOptimizationParameters(parameters.preciseStructuralOptimizationParameters());


		size_type maxTotalStructuralOptimizing = 0;
		{
			maxTotalStructuralOptimizing += parameters.globalStructuralOptimizationParameters().maxStructuralOptimizing();
			maxTotalStructuralOptimizing += parameters.localStructuralOptimizationParameters().maxStructuralOptimizing();
			maxTotalStructuralOptimizing += parameters.preciseStructuralOptimizationParameters().maxStructuralOptimizing();
		}
		crystalDesignParameters.setMaxTotalStructuralOptimizing(maxTotalStructuralOptimizing);
	}

	_crystalDesigner.setCrystalDesignParameters(crystalDesignParameters);
}
// Constructors
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
// **********************************************************************************************************************************************************************************************************************************************************************************************
